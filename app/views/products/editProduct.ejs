<%- include('../partials/header.ejs', {title: 'Crear producto', home: 0}) %>
<%- include('../partials/navbar.ejs') %>
<%- include('../partials/offcanvas.ejs') %>
<div class="container">
    <div class="row">
        <div class="col">
            <div class="row justify-content-center">
                <div class="col-auto mt-3">
                    <h1 class="tc">Editar producto <%= product.name %></h1>
                </div>
            </div>
            <form action="/product/edit/<%= product.id %>?_method=PUT" method="POST">
                <div class="row justify-content-center mt-3">
                    <div class="col-7">
                        <label for="nombre">
                            Nombre
                        </label>
                    </div>
                    <div class="col-7">
                        <input type="text" class="form-estandar" value="<%= product.name %>" name="name" id="nombre" required>
                    </div>
                </div>
                <div class="row justify-content-center mt-3">
                    <div class="col-7">
                        <label for="precio">
                            Precio
                        </label>
                    </div>
                    <div class="col-7">
                        <input type="number" class="form-estandar" value="<%= product.price %>" name="price" id="precio" required>
                    </div>
                </div>
                <div class="row justify-content-center mt-3">
                    <div class="col-7">
                        <label for="shortDescription">
                            Descripción Corta
                        </label>
                    </div>
                    <div class="col-7">
                        <input type="text" class="form-estandar" value="<%= product.shortDescription %>" name="shortDescription" id="shortDescription" required>
                    </div>
                </div>
                <div class="row justify-content-center mt-3">
                    <div class="col-7">
                        <label for="longDescription">
                            Descripción Larga
                        </label>
                    </div>
                    <div class="col-7">
                        <textarea name="longDescription" class="form-control form-estandar" id="longDescription" rows="1" required><%= product.longDescription %></textarea>
                    </div>
                </div>
                <div class="row justify-content-center mt-3">
                    <div class="col-7">
                        <label class="mb-2" for="characteristics">
                            Caracteristicas
                        </label>
                        <div id="caracteristicas">
                            <% for (characteristics of product.characteristics) {%>
                                <textarea name="characteristics" class="form-control form-estandar mb-2" id="caracteristicas" rows="1" required> <%= characteristics %> </textarea>
                            <% } %>
                        </div>
                        <div class="col-5">
                            <button class="boton-estandar boton-flex" type="button" onclick="addCharac()">Agregar caracteristica</button>
                        </div>
                    </div>
                </div>
                <div class="row justify-content-center mt-3">
                    <div class="col-7">
                        <label class="mb-2" for="categories">
                            Categorías
                        </label>
                        <div id="categorias">
                            <% for (categories of product.categories){ %>
                            <select name="categories" id="categories" class="form form-control mb-3">
                                <option value="<%= categories %>" selected><%= categories %></option>
                                <option value="">Ninguna</option>
                                <option value="Escalada">Escalada</option>
                                <option value="Mosquetones y conectores">Mosquetones y conectores</option>
                                <option value="Singing rock">Singing rock</option>
                                <option value="Arneses">Arneses</option>
                                <option value="Black Diamond">Black Diamond</option>
                                <option value="Senderismo y Campismo">Senderismo y Campismo</option>
                                <option value="Lámparas">Lámparas</option>
                                <option value="Cañonismo y Espeleo">Cañonismo y Espeleo</option>
                                <option value="Parques de aventura y Vía Ferrata">Parques de aventura y Vía Ferrata</option>
                                <option value="Básicos">Básicos</option>
                                <option value="Seguridad">Seguridad</option>
                                <option value="Avanzado">Avanzado</option>
                            </select>
                            <% } %>
                        </div>
                        <div class="col-5">
                            <button class="boton-estandar boton-flex" type="button" onclick="addCategory()">Agregar categoría</button>
                        </div>
                    </div>
                </div>
                <div class="row justify-content-center mt-3">
                    <div class="col-7">
                        <label for="identifier">
                            Identificador
                        </label>
                    </div>
                    <div class="col-7">
                        <input type="text" class="form-estandar" value="<%= product.identifier %>" name="identifier" id="identifier" required>
                    </div>
                </div>
                <div class="row justify-content-center mt-3">
                    <div class="col-7">
                        <label for="vendidos">
                            vendidos
                        </label>
                    </div>
                    <div class="col-7">
                        <input type="text" class="form-estandar" value="<%= product.vendidos %>" name="vendidos" id="vendidos" required>
                    </div>
                </div>
                <div class="row justify-content-center mt-3">
                    <div class="col-7">
                        <label for="toBuy">
                            toBuy
                        </label>
                    </div>
                    <div class="col-7">
                        <input type="text" class="form-estandar" value="<%= product.toBuy %>" name="toBuy" id="toBuy" required>
                    </div>
                </div>
                <br>
                <div class="row justify-content-center mt-3">
                    <div class="col-11 center">
                        <button type="submit" class="boton-estandar boton-flex">
                            Editar producto
                        </button>
                    </div>
                </div>
            </form>
            <form action="/product/delete/<%= product.id %>?_method=DELETE" method="POST" style="display: inline-flex">
                <button type="submit" class="btn btn-danger">ELIMINAR</button>
            </form>
        </div>
    </div>
</div>
<script>
    function addCategory(){
        console.log("funca");
        let categorias = document.getElementById("categorias");
        let select = `<select name="categories" id="categories" class="form form-control mb-3">
                                <option selected>Selecciona una categoría</option>
                                <option value="Escalada">Escalada</option>
                                <option value="Mosquetones y conectores">Mosquetones y conectores</option>
                                <option value="Singing rock">Singing rock</option>
                                <option value="Arneses">Arneses</option>
                                <option value="Black Diamond">Black Diamond</option>
                                <option value="Senderismo y Campismo">Senderismo y Campismo</option>
                                <option value="Lámparas">Lámparas</option>
                                <option value="Cañonismo y Espeleo">Cañonismo y Espeleo</option>
                                <option value="Parques de aventura y Vía Ferrata">Parques de aventura y Vía Ferrata</option>
                                <option value="Básicos">Básicos</option>
                                <option value="Seguridad">Seguridad</option>
                                <option value="Avanzado">Avanzado</option>
                            </select>`;
        categorias.insertAdjacentHTML('beforeend', select);
    }
    function addCharac(){
        let caracteristicas = document.getElementById("caracteristicas");
        let cajaDeTexto = `<div id="categorias mb-2">
                            <textarea name="characteristics" class="form-control form-estandar  mb-2" id="caracteristicas" rows="1" required></textarea>
                        </div>`;
        caracteristicas.insertAdjacentHTML('beforeend', cajaDeTexto);
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
</script>
</body>
<%- include('../partials/footer.ejs') %>